from typing import List

class Solution:
    def maxProfit(self, prices: List[int], fee: int) -> int:
        highest = prices[0]
        lowest = prices[0]
        sum = 0 
        for i in range(1,len(prices)) :
            current = prices[i]
            if current > highest :
                highest = prices[i]
            if i+1  < len(prices):
                if current > prices[i+1] :
                    # if prices[i+1] > highest :
                    #     highest = prices[i+1]
                    if current - prices[i+1] - fee < 0 :
                        if prices[i+1] < lowest :
                            
                            lowest = prices[i+1] 
                            continue

                    # 
                    else :
                        sum += highest - lowest - fee
                        lowest = prices[i+1]
                        highest = prices[i+1]
            else :
                
                if highest > lowest and highest - lowest -fee > 0:
                    sum += highest - lowest -fee
            
        return sum
            
sol = Solution()
print(sol.maxProfit([9,8,7,1,2],3))



